(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2967:function(e,t,s){Promise.resolve().then(s.bind(s,1149))},1149:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var l=s(9268),n=s(6006),a=s(1712),r=s(3393);let i=()=>{let[e,t]=(0,n.useState)(!1),s=a.Z.get("name"),i=a.Z.get("color"),c=()=>{t(e=>!e)},o=()=>{a.Z.remove("name"),a.Z.remove("id"),a.Z.remove("token"),a.Z.remove("color"),window.location.reload()};return(0,l.jsx)("div",{className:"md:justify-self-end flex items-center md:gap-4 h-full",children:(0,l.jsxs)("div",{className:"px-2 shadow-sm h-[40px] flex justify-between items-center gap-2 w-[310px] rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{style:{backgroundColor:i},className:"w-[25px] h-[25px] lg:w-[30px] lg:h-[30px] bg-neutral-200 rounded-lg"}),(0,l.jsx)("div",{className:"font-light text-sm text-slate-800",children:s})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(r.$Pu,{onClick:()=>c(),size:24,className:"text-orange-600 cursor-pointer"}),e?(0,l.jsx)("div",{className:"w-[100px] absolute bg-white p-2 right-0 top-10 border border-orange-400 rounded-lg z-20",children:(0,l.jsx)("ul",{className:"",children:(0,l.jsx)("li",{className:"cursor-pointer",onClick:()=>o(),children:"Log out"})})}):null]})]})})},c=()=>{let[e,t]=(0,n.useState)("");return(0,l.jsx)("div",{className:"hidden lg:block justify-self-center relative"})};var o=s(5846),d=s.n(o),x=s(1033);let u=e=>{let{search:t}=e,[s,r]=(0,n.useState)(!1),[o,u]=(0,n.useState)(!1),m=a.Z.get("id");(0,n.useEffect)(()=>{m&&u(!0),r(!0)},[m]);let g=()=>(0,l.jsxs)("div",{className:"justify-self-end flex gap-4 items-center",children:[(0,l.jsx)(d(),{href:"/authpage",className:"cursor-pointer py-2 px-3 rounded-lg border text-orange-400",children:"LogIn"}),(0,l.jsx)(d(),{href:"/authpage?id=signup",className:"cursor-pointer py-2 px-3 rounded-lg bg-orange-400 text-white",children:"Sign Up"})]});return(0,l.jsxs)("div",{className:"h-[65px] bg-white rounded-b-lg grid grid-cols-2 lg:grid-cols-3 grid-rows-1 items-center px-5 shadow-md shadow-slate-400/10",children:[(0,l.jsxs)(d(),{href:"/",className:"font-semibold text-slate-600 flex items-center gap-1",children:[(0,l.jsx)(x.kUE,{size:24}),(0,l.jsx)("div",{className:"",children:"Flumpf"})]}),t?(0,l.jsx)(c,{}):(0,l.jsx)("div",{className:"hidden lg:block"}),s?o?(0,l.jsx)(i,{}):(0,l.jsx)(g,{}):null]})},m=()=>{let e=a.Z.get("id"),[t,s]=(0,n.useState)(""),[r,i]=(0,n.useState)("");return(0,n.useEffect)(()=>{e?(s("/profilepage/?id=".concat(e)),i("/settings/?id=".concat(e))):(s("/authpage"),i("/authpage"))},[e]),(0,l.jsx)("div",{className:"h-[60px] lg:h-full bg-white lg:bg-transparent rounded-lg",children:(0,l.jsxs)("ul",{className:"flex items-center justify-center lg:justify-start lg:items-start lg:flex-col gap-8 lg:gap-4 py-2 h-full",children:[(0,l.jsxs)(d(),{href:t,className:"flex gap-2 items-center cursor-pointer",children:[(0,l.jsx)(x.nf1,{size:24,className:"text-orange-500"}),(0,l.jsx)("span",{className:"hidden lg:block mt-0 tracking-wider",children:"Profile"})]}),(0,l.jsxs)(d(),{href:"/",className:"flex gap-2 items-center cursor-pointer",children:[(0,l.jsx)(x.VdP,{size:24,className:"text-orange-500"}),(0,l.jsx)("span",{className:"hidden lg:block mt-0 tracking-wider",children:"Dashdoard"})]}),(0,l.jsxs)(d(),{href:r,className:"flex gap-2 items-center cursor-pointer",children:[(0,l.jsx)(x.zPD,{size:24,className:"text-orange-500"}),(0,l.jsx)("span",{className:"hidden lg:block mt-0 tracking-wider",children:"Settings"})]})]})})},g=e=>{let{isGrid:t,children:s}=e;return(0,l.jsx)("div",{className:"\n        p-2 \n        lg:p-8 \n        rounded-t-lg \n        flex \n        flex-col-reverse \n        overflow-hidden \n        h-full\n        w-full\n        lg:grid \n        ".concat(t?"lg:grid-cols-LeftRight":"lg:grid-cols-Profile","\n        gap-2 \n        lg:gap-8\n        justify-between\n        "),children:s})};var h=s(6008),p=s(4214);let f=()=>{let e=(0,h.useRouter)(),[t,s]=(0,n.useState)(!1),[r,i]=(0,n.useState)(null),[c,o]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1),m=a.Z.get("id"),g=a.Z.get("name"),f=a.Z.get("color"),j=()=>{a.Z.get("token")?s(!0):e.push("/authpage")},v=()=>{i(null)},N=()=>{if(u(!0),null===r&&0===c.length)return u(!1),!1;try{let e=JSON.stringify({data:r});if(null===r)try{p.Z.post("/api/postCreate",{text:c,nameValue:g,userId:m,color:f}).then(e=>console.log(e)),s(!1),u(!1),i(null),o(""),window.location.reload()}catch(e){console.log(e)}else p.Z.post("/api/uploads/",e,{headers:{"Content-Type":"application/json"}}).then(async e=>{let t={text:c,nameValue:g,userId:m,color:f,imagePost:[{url:e.data.url,id:e.data.id}]};try{await p.Z.post("/api/postCreate",t).then(e=>console.log(e)),s(!1),u(!1),i(null),o(""),window.location.reload()}catch(e){console.log(e)}})}catch(e){}};return(0,l.jsxs)("div",{className:" flex  items-center rounded-lg  bg-white  sticky  z-10 top-0  shadow-md  shadow-slate-400/10 ",children:[(0,l.jsx)("div",{className:"m-3 w-8 h-8 rounded-lg bg-slate-300"}),(0,l.jsx)("div",{onClick:()=>j(),className:"text-zinc-300 font-light text-sm lg:text-base cursor-pointer w-full",children:t?"":"Create Post"}),(0,l.jsx)("div",{className:"\n          absolute \n          top-16\n          ".concat(t?"opacity-100":"opacity-0","\n          ").concat(t?"visible":"invisible","\n          ").concat(t?"z-10":"-z-10","\n          transition\n          border \n          w-full \n          bg-white\n          overflow-hidden\n          rounded-lg\n          shadow-lg shadow-slate-400/40\n        "),children:(0,l.jsxs)("div",{className:"w-full h-full relative",children:[(0,l.jsx)("div",{onClick:()=>s(!1),className:"  text-slate-500  absolute  top-4 right-4  cursor-pointer z-10 ",children:(0,l.jsx)(x.SV5,{size:24})}),(0,l.jsxs)("div",{className:"py-8 px-4 flex flex-col gap-2 relative",children:[d?(0,l.jsx)("div",{className:"absolute inset-0 bg-slate-400 bg-opacity-40 z-30 flex items-center justify-center",children:(0,l.jsx)("div",{className:"p-8 border border-white rounded-lg animate-spin"})}):null,(0,l.jsxs)("label",{className:"flex flex-col gap-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-2xl text-slate-500",children:"Enter You Post"}),(0,l.jsx)("textarea",{value:c,onChange:e=>o(e.target.value),cols:"50",rows:"3",className:"outline-none w-full resize-none",placeholder:"Write here..."})]}),r&&(0,l.jsxs)("div",{className:"w-[150px] h-[150px] lg:w-[250px] lg:h-[250px] relative",children:[(0,l.jsx)("div",{className:"absolute bg-white top-2 right-2 rounded-md",onClick:()=>v(),children:(0,l.jsx)(x.oHP,{size:24,className:"text-orange-400 cursor-pointer"})}),(0,l.jsx)("img",{className:"w-full h-full rounded-lg object-cover object-center",src:r})]}),(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("div",{className:"w-[30px] h-[30px] overflow-hidden border relative flex items-center justify-center rounded-sm",children:[(0,l.jsx)(x.Ypm,{size:26,className:"text-orange-400"}),(0,l.jsx)("form",{method:"post",onChange:function(e){let t=new FileReader;t.onload=function(e){i(e.target.result)},t.readAsDataURL(e.target.files[0])},className:"absolute top-0 opacity-0 cursor-pointer",children:(0,l.jsx)("input",{type:"file",name:"file",className:"cursor-pointer"})})]})}),(0,l.jsx)("hr",{}),(0,l.jsx)("button",{className:"border w-1/4 py-2 rounded-lg",onClick:N,children:"Create"})]})]})})]})};var j=s(4021);let v=e=>{let{userId:t,color:s,isLoaded:n,authorName:a,dateString:r}=e;return(0,l.jsxs)(d(),{href:"/userprofile?id=".concat(t),className:"grid grid-cols-post grid-rows-2 items-center gap-y-0 gap-x-2",children:[(0,l.jsx)("div",{style:{backgroundColor:s},className:"w-8 h-8 rounded-lg row-span-full"}),(0,l.jsx)("span",{className:"\n          ".concat(n?"":"w-[100px]","\n          ").concat(n?"":"h-[15px]","\n          ").concat(n?"":"bg-slate-300","\n          ").concat(n?"":"animate-pulse","\n          ").concat(n?"":"rounded-md","\n          font-light \n          text-slate-800 \n          text-sm \n          self-end\n        "),children:n?a:""}),(0,l.jsx)("div",{className:"self-start text-xs text-slate-400",children:n?r:""})]})};var N=s(6462);let w=e=>{let{isOpen:t,userId:s,color:r,isLoaded:i,authorName:c,dateString:o,onClose:u,postId:m,postText:g}=e,[h,f]=(0,n.useState)(""),[j,w]=(0,n.useState)(),[b,y]=(0,n.useState)(!1),[k,S]=(0,n.useState)(!1),C=a.Z.get("id"),z=a.Z.get("name");(0,n.useEffect)(()=>{t&&p.Z.get("/api/getComments/?postId=".concat(m)).then(e=>{w(e.data.comments),y(!0)})},[t]);let Z=()=>{if(0===h.length||k)return;S(!0);let e={userId:C,text:h,name:z,time:new Date};p.Z.post("/api/addComments/?id=".concat(m),e).then(e=>{f(""),w(e.data.updatedPost.comments),S(!1)}).catch(()=>S(!1))},E=e=>{if(!e)return"";let t=new Date(e),s=t.toLocaleDateString("en-US",{hour:"numeric",minute:"numeric",year:"numeric",month:"long",day:"numeric"});return s},P=e=>{let{name:t,userId:s,time:n,text:a}=e;return(0,l.jsxs)("div",{className:"border-l border-orange-400 p-2",children:[(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(d(),{href:"/userprofile/?id=".concat(s),className:"font-bold text-md text-slate-500",children:t}),(0,l.jsx)("div",{className:"text-xs font-light",children:E(n)})]}),(0,l.jsx)("div",{className:"pt-2 text-md",children:a})]},(0,N.Z)())};return(0,l.jsx)("div",{className:"".concat(t?"flex":"hidden"," fixed top-0 bg-slate-600 bg-opacity-20 left-0 w-full h-full z-20 items-center justify-center"),children:(0,l.jsxs)("div",{className:"h-full w-full lg:w-2/4 lg:max-h-[70vh] p-4 lg:p-8 bg-white lg:rounded-lg flex flex-col gap-4 overflow-y-scroll",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(v,{userId:s,color:r,isLoaded:i,authorName:c,dateString:o}),(0,l.jsx)("div",{className:"cursor-pointer",onClick:u,children:(0,l.jsx)(x.oHP,{size:24})})]}),(0,l.jsx)("div",{className:"py-4 text-xl",children:g}),(0,l.jsx)("h3",{className:"font-bold text-slate-600 text-xl",children:"Ð¡omments"}),(0,l.jsx)("div",{className:"h-full overflow-y-scroll flex flex-col gap-4",children:b?(0,l.jsx)(l.Fragment,{children:0==j.length?(0,l.jsx)("div",{className:"font-semibold capitalize text-lg",children:"no comments yet"}):j.map(e=>(0,l.jsx)(P,{userId:e.userId,name:e.name,time:e.time,text:e.text},(0,N.Z)()))}):(0,l.jsx)("div",{className:"",children:"Loading..."})}),(0,l.jsxs)("div",{className:"py-4 border-t flex flex-col gap-2",children:[(0,l.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),rows:"2",className:"p-2 w-full resize-none border rounded-lg outline-none"}),(0,l.jsx)("div",{onClick:()=>Z(),className:"\n              ".concat(k?"opacity-40":"","\n              rounded-lg \n              py-4\n              px-2 \n              flex \n              flex-col \n              items-center \n              justify-center\n              bg-orange-400\n              text-white\n              text-xl\n              font-semibold\n              cursor-pointer\n              "),children:"Send"})]})]})})},b=e=>{let{openEdit:t,postText:s,onClose:a,editedText:r,posrId:i}=e,[c,o]=(0,n.useState)(s),[d,x]=(0,n.useState)(!1),u=()=>{x(!0),p.Z.patch("/api/postEdit",{postId:i,editedText:c}).then(()=>{a(),x(!1),r(c)})};return(0,l.jsx)("div",{className:"".concat(t?"flex":"hidden"," fixed top-0 lg:bg-slate-600 lg:bg-opacity-20 left-0 w-full h-full z-20 items-center justify-center"),children:(0,l.jsxs)("div",{className:"h-full w-full lg:w-2/4 lg:h-auto lg:max-h-[70vh] p-4 lg:p-8 bg-slate-600 lg:bg-white bg-opacity-20 lg:rounded-lg flex flex-col gap-4 overflow-y-scroll justify-center",children:[d?(0,l.jsx)("div",{className:"w-full h-[250px] bg-white border flex items-center justify-center rounded-lg font-semibold text-xl",children:"Please Wait.."}):(0,l.jsx)("textarea",{className:"w-full h-[250px] resize-none text-xl font-medium p-2 lg:p-4 outline-none border border-orange-400 rounded-lg",value:c,onChange:e=>o(e.target.value)}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{onClick:a,className:"cursor-pointer bg-white font-semibold text-lg py-3 px-2 lg:border rounded-lg",children:"Cancel"}),(0,l.jsx)("div",{onClick:u,className:"cursor-pointer font-semibold text-lg py-3 px-5 bg-orange-400 text-white rounded-lg",children:"Edit"})]})]})})},y=e=>{let{isLoaded:t,postText:s,authorName:r,createdAt:i,color:c,userId:o,idPost:d,likesArr:u,comments:m,imagePost:g}=e,[h,f]=(0,n.useState)(!1),[N,y]=(0,n.useState)(!1),[k,S]=(0,n.useState)(!1),[C,z]=(0,n.useState)(!1),[Z,E]=(0,n.useState)(),[P,I]=(0,n.useState)(null),[L,D]=(0,n.useState)(),[T,_]=(0,n.useState)(!1),[R,U]=(0,n.useState)(s),[A,F]=(0,n.useState)(!1),O=new Date(i),V=O.toLocaleDateString("en-US",{hour:"numeric",minute:"numeric",year:"numeric",month:"long",day:"numeric"}),G=a.Z.get("id"),H=e=>{h&&!e.target.closest(".pin")?f(!1):f(!0)},W=()=>{p.Z.delete("/api/postRemove/?id=".concat(d)).then(()=>{y(!0)}).catch(e=>console.log(e))},Y=()=>{C?p.Z.patch("/api/postLikeTarger/?id=".concat(d),{userId:G}).then(()=>{E(e=>e-1),z(!1)}):p.Z.patch("/api/postLikeTarger/?id=".concat(d),{userId:G}).then(()=>{E(e=>e+1),z(!0)})};return(0,n.useEffect)(()=>{void 0!==o&&o===G&&S(!0),void 0!==u&&(E(u.length),-1!==u.indexOf(G)&&z(!0)),void 0!==m&&D(m.length);let e=e=>{(!e.target.closest(".menu-container")||e.target.closest(".pin"))&&f(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[m,u,G,o]),(0,l.jsxs)("div",{className:"".concat(N?"hidden":""," p-4 bg-white rounded-lg flex flex-col gap-4"),children:[(0,l.jsx)(b,{openEdit:A,postText:s,editedText:e=>U(e),onClose:()=>F(!1),posrId:d}),(0,l.jsx)(w,{onClose:()=>_(!1),isOpen:T,userId:o,color:c,postText:s,isLoaded:t,authorName:r,dateString:V,postId:d,imagePost:g}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(v,{userId:o,color:c,isLoaded:t,authorName:r,dateString:V}),(0,l.jsxs)("div",{className:"".concat(k?"flex":"hidden","  relative menu-container z-0"),onClick:e=>H(e),children:[(0,l.jsx)(x.fXH,{size:22}),(0,l.jsx)("div",{className:"\n              ".concat(h?"visible":"invisible","\n              ").concat(h?"top-10":"top-0","\n              py-3\n              px-2\n              right-0\n              absolute \n              border \n              rounded-lg\n              w-[140px]\n              bg-white\n              shadow-md \n            shadow-slate-400/10\n            "),children:(0,l.jsxs)("ul",{className:"flex flex-col gap-2",children:[(0,l.jsx)("li",{onClick:()=>W(),className:"\n                    pin\n                    relative\n                    z-20\n                    pin\n                    flex \n                    items-center \n                    gap-2 \n                    cursor-pointer\n                  ",children:(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(j.gKM,{size:24}),(0,l.jsx)("span",{className:"",children:"Remove"})]})}),(0,l.jsx)("li",{onClick:()=>F(!0),className:"\n                    pin\n                    relative\n                    z-20\n                    pin\n                    flex \n                    items-center \n                    gap-2 \n                    cursor-pointer\n                  ",children:(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(j.FNg,{size:24}),(0,l.jsx)("span",{className:"",children:"Edit"})]})})]})})]})]}),(0,l.jsx)("div",{className:"\n          ".concat(t?"":"h-[50px]","\n          ").concat(t?"":"animate-pulse","\n          ").concat(t?"":"bg-slate-300","\n          ").concat(t?"":"rounded-lg","\n\n          text-sm \n          lg:text-xl\n          tracking-wide\n        "),children:R}),t&&(0,l.jsx)(l.Fragment,{children:g.length>0?(0,l.jsx)("div",{className:"flex",children:g.map(e=>(0,l.jsx)("div",{className:"max-w-[250px] max-height-[250px] rounded-lg overflow-hidden flex items-center",children:(0,l.jsx)("img",{src:e.url,alt:"Description of the image",className:"w-auto h-auto object-fill"},"".concat(e.id,"1fd2a"))},e.id))}):null}),t?(0,l.jsxs)("div",{className:"".concat(G?"flex":"hidden"," items-center gap-5"),children:[(0,l.jsxs)("div",{onClick:()=>Y(),className:"px-2 py-2 border flex items-center gap-2 rounded-full cursor-pointer",children:[(0,l.jsx)(x.lo,{size:24,className:"".concat(C?"text-red-500":"text-slate-400")}),(0,l.jsx)("span",{className:"text-slate-800",children:Z})]}),(0,l.jsxs)("div",{className:"px-2 py-2 border flex items-center gap-2 rounded-full cursor-pointer",onClick:()=>_(!0),children:[(0,l.jsx)(x.RG4,{size:24,className:"text-slate-400"}),(0,l.jsx)("span",{className:"text-slate-800",children:L})]})]}):(0,l.jsx)("div",{className:"animate-pulsew-[100px]h-[40px]rounded-lg bg-slate-300"})]})},k=()=>{let[e,t]=(0,n.useState)(!0),[s,a]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{p.Z.get("/api/postGetAll").then(e=>{a(e.data.reverse())}).catch(e=>console.log(e))},[]),(0,n.useEffect)(()=>{s.length>0&&t(!1)},[s]),(0,l.jsxs)("div",{className:"relative overflow-y-scroll rounded-lg lg:rounded-t-xl snap-none",children:[(0,l.jsx)(f,{}),(0,l.jsx)("div",{className:"flex flex-col gap-4 overflow-hidden pt-4 lg:pt-8",children:(e?[void 0,void 0,void 0,void 0]:s).map((t,s)=>e?(0,l.jsx)(y,{isLoaded:!1},s):(0,l.jsx)(y,{isLoaded:!0,idPost:t._id,userId:t.user,postText:t.text,authorName:t.name,createdAt:t.createdAt,likeCount:t.likesCount,likesArr:t.likesUser,color:t.color,image:t.image,comments:t.comments,imagePost:t.imagePost},t._id))})]})},S=e=>{let{children:t}=e;return(0,l.jsx)("div",{className:"container mx-auto max-w-screen-xl flex flex-col gap-1 h-screen h-[env(safe-area-inset-top, safe-area-inset-bottom)]",children:t})};function C(){return(0,l.jsx)("div",{children:(0,l.jsxs)(S,{children:[(0,l.jsx)(u,{search:!0}),(0,l.jsxs)(g,{isGrid:!0,children:[(0,l.jsx)(m,{}),(0,l.jsx)(k,{})]})]})})}s(6571)}},function(e){e.O(0,[104,776,618,667,139,744],function(){return e(e.s=2967)}),_N_E=e.O()}]);