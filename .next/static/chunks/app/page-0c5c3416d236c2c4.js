(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2967:function(e,s,t){Promise.resolve().then(t.bind(t,734))},734:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return S}});var l=t(9268),n=t(6006),a=t(1712),r=t(3393);let i=()=>{let[e,s]=(0,n.useState)(!1),t=a.Z.get("name"),i=a.Z.get("color"),c=()=>{s(e=>!e)},o=()=>{a.Z.remove("name"),a.Z.remove("id"),a.Z.remove("token"),a.Z.remove("color"),window.location.reload()};return(0,l.jsx)("div",{className:"md:justify-self-end flex items-center md:gap-4 h-full",children:(0,l.jsxs)("div",{className:"px-2 shadow-sm h-[40px] flex justify-between items-center gap-2 w-[310px] rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{style:{backgroundColor:i},className:"w-[25px] h-[25px] lg:w-[30px] lg:h-[30px] bg-neutral-200 rounded-lg"}),(0,l.jsx)("div",{className:"font-light text-sm text-slate-800",children:t})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(r.$Pu,{onClick:()=>c(),size:24,className:"text-orange-600 cursor-pointer"}),e?(0,l.jsx)("div",{className:"w-[100px] absolute bg-white p-2 right-0 top-10 border border-orange-400 rounded-lg z-20",children:(0,l.jsx)("ul",{className:"",children:(0,l.jsx)("li",{className:"cursor-pointer",onClick:()=>o(),children:"Log out"})})}):null]})]})})},c=()=>{let[e,s]=(0,n.useState)("");return(0,l.jsx)("div",{className:"hidden lg:block justify-self-center relative"})};var o=t(5846),d=t.n(o),x=t(1033);let u=e=>{let{search:s}=e,[t,r]=(0,n.useState)(!1),[o,u]=(0,n.useState)(!1),m=a.Z.get("id");(0,n.useEffect)(()=>{m&&u(!0),r(!0)},[]),(0,n.useEffect)(()=>{},[]);let h=()=>(0,l.jsxs)("div",{className:"justify-self-end flex gap-4 items-center",children:[(0,l.jsx)(d(),{href:"/authpage",className:"cursor-pointer py-2 px-3 rounded-lg border text-orange-400",children:"LogIn"}),(0,l.jsx)(d(),{href:"/authpage?id=signup",className:"cursor-pointer py-2 px-3 rounded-lg bg-orange-400 text-white",children:"Sign Up"})]});return(0,l.jsxs)("div",{className:"h-[65px] bg-white rounded-b-lg grid grid-cols-2 lg:grid-cols-3 grid-rows-1 items-center px-5 shadow-md shadow-slate-400/10",children:[(0,l.jsxs)(d(),{href:"/",className:"font-semibold text-slate-600 flex items-center gap-1",children:[(0,l.jsx)(x.kUE,{size:24}),(0,l.jsx)("div",{className:"",children:"Flumpf"})]}),s?(0,l.jsx)(c,{}):(0,l.jsx)("div",{className:"hidden lg:block"}),t?o?(0,l.jsx)(i,{}):(0,l.jsx)(h,{}):null]})},m=()=>{let e=a.Z.get("id"),[s,t]=(0,n.useState)(""),[r,i]=(0,n.useState)("");return(0,n.useEffect)(()=>{e?(t("/profilepage/?id=".concat(e)),i("/settings/?id=".concat(e))):(t("/authpage"),i("/authpage"))},[e]),(0,l.jsx)("div",{className:"h-[60px] lg:h-full bg-white lg:bg-transparent rounded-lg",children:(0,l.jsxs)("ul",{className:"flex items-center justify-center lg:justify-start lg:items-start lg:flex-col gap-8 lg:gap-4 py-2 h-full",children:[(0,l.jsxs)(d(),{href:s,className:"flex gap-2 items-center cursor-pointer",children:[(0,l.jsx)(x.nf1,{size:24,className:"text-orange-500"}),(0,l.jsx)("span",{className:"hidden lg:block mt-0 tracking-wider",children:"Profile"})]}),(0,l.jsxs)(d(),{href:"/",className:"flex gap-2 items-center cursor-pointer",children:[(0,l.jsx)(x.VdP,{size:24,className:"text-orange-500"}),(0,l.jsx)("span",{className:"hidden lg:block mt-0 tracking-wider",children:"Dashdoard"})]}),(0,l.jsxs)(d(),{href:r,className:"flex gap-2 items-center cursor-pointer",children:[(0,l.jsx)(x.zPD,{size:24,className:"text-orange-500"}),(0,l.jsx)("span",{className:"hidden lg:block mt-0 tracking-wider",children:"Settings"})]})]})})},h=e=>{let{isGrid:s,children:t}=e;return(0,l.jsx)("div",{className:"\n        p-2 \n        lg:p-8 \n        rounded-t-lg \n        flex \n        flex-col-reverse \n        overflow-hidden \n        h-full\n        w-full\n        lg:grid \n        ".concat(s?"lg:grid-cols-LeftRight":"lg:grid-cols-Profile","\n        gap-2 \n        lg:gap-8\n        justify-between\n        "),children:t})};var g=t(6008),p=t(4214);let f=()=>{let e=(0,g.useRouter)(),[s,t]=(0,n.useState)(!1),[r,i]=(0,n.useState)(""),c=a.Z.get("id"),o=a.Z.get("name"),d=a.Z.get("color"),u=()=>{a.Z.get("token")?t(!0):e.push("/authpage")},m=()=>{try{p.Z.post("/api/postCreate",{text:r,nameValue:o,userId:c,color:d}).then(e=>console.log(e)).then(()=>{t(!1),window.location.reload()}).catch(error=console.log(error))}catch(e){}};return(0,l.jsxs)("div",{className:" flex  items-center rounded-lg  bg-white  sticky  z-10 top-0  shadow-md  shadow-slate-400/10 ",children:[(0,l.jsx)("div",{className:"m-3 w-8 h-8 rounded-lg bg-slate-300"}),(0,l.jsx)("div",{onClick:()=>u(),className:"text-zinc-300 font-light text-sm lg:text-base cursor-pointer w-full",children:s?"":"Create Post"}),(0,l.jsx)("div",{className:"\n          absolute \n          top-16\n          ".concat(s?"opacity-100":"opacity-0","\n          ").concat(s?"visible":"invisible","\n          ").concat(s?"z-10":"-z-10","\n          transition\n          border \n          w-full \n          bg-white\n          rounded-lg\n          shadow-lg shadow-slate-400/40\n        "),children:(0,l.jsxs)("div",{className:"w-full h-full relative",children:[(0,l.jsx)("div",{onClick:()=>t(!1),className:"  text-slate-500  absolute  top-4 right-4  cursor-pointer z-10 ",children:(0,l.jsx)(x.SV5,{size:24})}),(0,l.jsxs)("div",{className:"py-8 px-4 flex flex-col gap-2",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-2xl text-slate-500",children:"Enter You Post"}),(0,l.jsx)("textarea",{value:r,onChange:e=>i(e.target.value),cols:"50",rows:"3",className:"outline-none w-full resize-none",placeholder:"Write here..."})]}),(0,l.jsx)("hr",{}),(0,l.jsx)("button",{onClick:()=>m(),className:"border w-1/4 py-2 rounded-lg ",children:"Send"})]})]})})]})};var j=t(4021);let v=e=>{let{userId:s,color:t,isLoaded:n,authorName:a,dateString:r}=e;return(0,l.jsxs)(d(),{href:"/userprofile?id=".concat(s),className:"grid grid-cols-post grid-rows-2 items-center gap-y-0 gap-x-2",children:[(0,l.jsx)("div",{style:{backgroundColor:t},className:"w-8 h-8 rounded-lg row-span-full"}),(0,l.jsx)("span",{className:"\n          ".concat(n?"":"w-[100px]","\n          ").concat(n?"":"h-[15px]","\n          ").concat(n?"":"bg-slate-300","\n          ").concat(n?"":"animate-pulse","\n          ").concat(n?"":"rounded-md","\n          font-light \n          text-slate-800 \n          text-sm \n          self-end\n        "),children:n?a:""}),(0,l.jsx)("div",{className:"self-start text-xs text-slate-400",children:n?r:""})]})},N=e=>{let{isOpen:s,userId:t,color:r,isLoaded:i,authorName:c,dateString:o,onClose:u,postId:m,postText:h}=e,[g,f]=(0,n.useState)(""),[j,N]=(0,n.useState)([]),w=a.Z.get("id"),b=a.Z.get("name"),k=()=>{if(0===g.length)return;let e={userId:w,text:g,name:b,time:new Date};p.Z.post("/api/addComments/?id=".concat(m),e).then(e=>{f(""),N(e.data.updatedPost.comments)}).catch(e=>console.log(e))},y=e=>{if(!e)return"";let s=new Date(e),t=s.toLocaleDateString("en-US",{hour:"numeric",minute:"numeric",year:"numeric",month:"long",day:"numeric"});return t};return(0,n.useEffect)(()=>{void 0!==m&&s&&p.Z.get("/api/postGetOne/?id=".concat(m)).then(e=>{e.data.comments.length>0&&N(e.data.comments)})},[m,s]),(0,l.jsx)("div",{className:"".concat(s?"flex":"hidden"," fixed top-0 bg-slate-600 bg-opacity-20 left-0 w-full h-full z-20 items-center justify-center"),children:(0,l.jsxs)("div",{className:"h-full w-full lg:w-2/4 lg:max-h-[70vh] p-4 lg:p-8 bg-white lg:rounded-lg flex flex-col gap-4 overflow-y-scroll",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(v,{userId:t,color:r,isLoaded:i,authorName:c,dateString:o}),(0,l.jsx)("div",{className:"cursor-pointer",onClick:u,children:(0,l.jsx)(x.oHP,{size:24})})]}),(0,l.jsx)("div",{className:"py-4 text-xl",children:h}),(0,l.jsx)("hr",{}),(0,l.jsx)("h3",{className:"mt-2 font-bold text-slate-600 text-xl",children:"Ð¡omments"}),(0,l.jsx)("div",{className:"h-auto overflow-y-scroll flex flex-col gap-4",children:j.length>0?j.map(e=>(0,l.jsxs)("div",{className:"border rounded-lg p-2",children:[(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(d(),{href:"/userprofile/?id=".concat(e.userId),className:"font-bold text-md text-slate-500",children:e.name}),(0,l.jsx)("div",{className:"text-xs font-light",children:y(e.time)})]}),(0,l.jsx)("div",{className:"pt-4 text-lg",children:e.text})]})):(0,l.jsx)("div",{className:"capitalize",children:"no comments yet"})}),(0,l.jsxs)("div",{className:"py-4 border-t flex flex-col gap-2",children:[(0,l.jsx)("textarea",{value:g,onChange:e=>f(e.target.value),rows:"2",className:"p-2 w-full resize-none border rounded-lg outline-none"}),(0,l.jsx)("div",{onClick:()=>k(),className:" rounded-lg  py-4 px-2  flex  flex-col  items-center  justify-center bg-orange-400 text-white text-xl font-semibold cursor-pointer ",children:"Send"})]})]})})},w=e=>{let{isLoaded:s,postText:t,authorName:r,createdAt:i,color:c,userId:o,idPost:d,likesArr:u,comments:m}=e,[h,g]=(0,n.useState)(!1),[f,w]=(0,n.useState)(!1),[b,k]=(0,n.useState)(!1),[y,S]=(0,n.useState)(!1),[z,C]=(0,n.useState)(),[Z,E]=(0,n.useState)(),[L,I]=(0,n.useState)(!1),P=new Date(i),_=P.toLocaleDateString("en-US",{hour:"numeric",minute:"numeric",year:"numeric",month:"long",day:"numeric"}),D=a.Z.get("id"),O=e=>{h&&!e.target.closest(".pin")?g(!1):g(!0)},R=()=>{p.Z.delete("/api/postRemove/?id=".concat(d)).then(e=>{w(!0)}).catch(e=>console.log(e))},U=()=>{y?p.Z.patch("/api/postLikeTarger/?id=".concat(d),{userId:D}).then(e=>{C(e=>e-1),S(!1)}):p.Z.patch("/api/postLikeTarger/?id=".concat(d),{userId:D}).then(e=>{C(e=>e+1),S(!0)})};return(0,n.useEffect)(()=>{void 0!==o&&o===D&&k(!0),void 0!==u&&(C(u.length),-1!==u.indexOf(D)&&S(!0)),void 0!==m&&E(m.length);let e=e=>{(!e.target.closest(".menu-container")||e.target.closest(".pin"))&&g(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]),(0,l.jsxs)("div",{className:"".concat(f?"hidden":""," p-4 bg-white rounded-lg flex flex-col gap-4"),children:[(0,l.jsx)(N,{onClose:()=>I(!1),isOpen:L,userId:o,color:c,postText:t,isLoaded:s,authorName:r,dateString:_,postId:d,comment:m}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(v,{userId:o,color:c,isLoaded:s,authorName:r,dateString:_}),(0,l.jsxs)("div",{className:"".concat(b?"flex":"hidden","  relative menu-container z-0"),onClick:e=>O(e),children:[(0,l.jsx)(x.fXH,{size:22}),(0,l.jsx)("div",{className:"\n              ".concat(h?"visible":"invisible","\n              ").concat(h?"top-10":"top-0","\n              py-3\n              px-2\n              right-0\n              absolute \n              border \n              rounded-lg\n              w-[140px]\n              bg-white\n              shadow-md \n            shadow-slate-400/10\n            "),children:(0,l.jsx)("ul",{className:"flex flex-col",children:(0,l.jsx)("li",{onClick:()=>R(),className:"\n                    pin\n                    relative\n                    z-20\n                    pin\n                    flex \n                    items-center \n                    gap-2 \n                    cursor-pointer\n                  ",children:b?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.gKM,{size:24}),(0,l.jsx)("span",{className:"",children:"Remove"})]}):null})})})]})]}),(0,l.jsx)("div",{className:"\n          ".concat(s?"":"h-[50px]","\n          ").concat(s?"":"animate-pulse","\n          ").concat(s?"":"bg-slate-300","\n          ").concat(s?"":"rounded-lg","\n\n          text-sm \n          lg:text-xl\n          tracking-wide\n        "),children:t}),s?(0,l.jsxs)("div",{className:"".concat(D?"flex":"hidden"," items-center gap-5"),children:[(0,l.jsxs)("div",{onClick:()=>U(),className:"px-2 py-2 border flex items-center gap-2 rounded-full cursor-pointer",children:[(0,l.jsx)(x.lo,{size:24,className:"".concat(y?"text-red-500":"text-slate-400")}),(0,l.jsx)("span",{className:"text-slate-800",children:z})]}),(0,l.jsxs)("div",{className:"px-2 py-2 border flex items-center gap-2 rounded-full cursor-pointer",onClick:()=>I(!0),children:[(0,l.jsx)(x.RG4,{size:24,className:"text-slate-400"}),(0,l.jsx)("span",{className:"text-slate-800",children:Z})]})]}):(0,l.jsx)("div",{className:"animate-pulsew-[100px]h-[40px]rounded-lg bg-slate-300"})]})},b=()=>{let[e,s]=(0,n.useState)(!0),[t,a]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{p.Z.get("/api/postGetAll").then(e=>{a(e.data.reverse())}).catch(e=>console.log(e))},[]),(0,n.useEffect)(()=>{t.length>0&&s(!1)},[t]),(0,l.jsxs)("div",{className:"relative overflow-y-scroll rounded-lg lg:rounded-t-xl snap-none",children:[(0,l.jsx)(f,{}),(0,l.jsx)("div",{className:"flex flex-col gap-4 overflow-hidden pt-4 lg:pt-8",children:(e?[void 0,void 0,void 0,void 0]:t).map((s,t)=>e?(0,l.jsx)(w,{isLoaded:!1},t):(0,l.jsx)(w,{isLoaded:!0,idPost:s._id,userId:s.user,postText:s.text,authorName:s.name,createdAt:s.createdAt,likeCount:s.likesCount,likesArr:s.likesUser,color:s.color,image:s.image,comments:s.comments},s._id))})]})},k=()=>(0,l.jsx)("div",{className:"hidden lg:block rounded-lg"}),y=e=>{let{children:s}=e;return(0,l.jsx)("div",{className:"container mx-auto max-w-screen-xl flex flex-col gap-1 h-screen h-[env(safe-area-inset-top, safe-area-inset-bottom)]",children:s})};function S(){return(0,l.jsx)("div",{children:(0,l.jsxs)(y,{children:[(0,l.jsx)(u,{search:!0}),(0,l.jsxs)(h,{isGrid:!0,children:[(0,l.jsx)(m,{}),(0,l.jsx)(b,{}),(0,l.jsx)(k,{})]})]})})}t(6571)}},function(e){e.O(0,[104,776,937,667,139,744],function(){return e(e.s=2967)}),_N_E=e.O()}]);